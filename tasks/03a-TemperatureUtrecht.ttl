@prefix : <https://github.com/quangis/transformation-algebra#>.
@prefix from: <https://github.com/quangis/transformation-algebra#from>.
@prefix type: <https://github.com/quangis/cct#type>.
@prefix via: <https://github.com/quangis/cct#operator>.

_:Neighborhoods
    type: "R(Obj, Reg * Nom)".
_:WeatherStations
    type: "R(Reg, Itv)".

[] a :Query;
    :question "What is the average temperature for each neighbourhood in Utrecht?";
    :workflow <https://example.com/#TemperatureUtrecht>;
    :input _:Neighborhoods, _:WeatherStations;
    :output [
        # Add regions (technical)
        type: "R(Obj, Reg * Itv)"; # A
        from: [
            # Average temperature field over neighborhood regions
            type: "R(Obj, Itv)"; # B
            from: [
                # Interpolate point-wise measurements from weather stations
                # into a temperature field
                type: "R(Loc, Itv)"; # C
                from: _:WeatherStations # D
            ];
            from: [
                # Neighborhood regions from neighborhood data
                type: "R(Obj, Reg)"; # E
                from: _:Neighborhoods # F
            ]
        ]
    ].
