@prefix : <https://quangis.github.io/tools#> .
@prefix ccd: <https://quangis.github.io/ccd#> .
@prefix cct: <https://quangis.github.io/cct#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>.
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>.
@prefix owl: <http://www.w3.org/2002/07/owl#> .

:Implementation a rdfs:Class;
    rdfs:comment "A concrete implementation of a tool.".

:Tool a rdfs:Class; rdfs:subClassOf :Implementation;
    rdfs:comment "A reference to a concrete tool, as implemented in programs 
    like ArcGIS or QGIS.".

:Workflow a rdfs:Class; rdfs:subClassOf :Implementation;
    rdfs:comment """A workflow, or more properly, a workflow schema: an 
    ensemble of concrete tools that *collectively* acts as an implementation 
    for something. This is sometimes also referred to as a supertool.""";
    rdfs:subClassOf [
        a owl:Restriction; owl:onProperty :input;
        owl:minQualifiedCardinality 1; owl:maxQualifiedCardinality 1
    ], [
        a owl:Restriction; owl:onProperty :output;
        owl:minQualifiedCardinality 1; owl:maxQualifiedCardinality 1
    ], [
        a owl:Restriction; owl:onProperty :action;
        owl:minQualifiedCardinality 1
    ].

:Signature a rdfs:Class;
    rdfs:comment """A signature is an abstract specification of a tool or 
    workflow. It may be implemented by multiple tools or workflows, because, 
    for example, a tool could be implemented in both QGIS and ArcGIS. 
    Conversely, multiple signatures may be implemented by the same tool, if it 
    can be used in multiple contexts, in the same way that a hammer can be used 
    both to drive a nail into a plank of wood or to break a piggy bank.

    A signature contains information on the format of the input and output, in 
    terms of core concept datatypes, and information on the purpose, in terms 
    of a `transforge` term.

    If a signature is given an rdfs:comment, this must be in the abstract, ie. 
    without reference to the specific data that may have been used in an 
    action.""";
    rdfs:subClassOf [
        a owl:Restriction; owl:onProperty :input;
        owl:minQualifiedCardinality 1; owl:maxQualifiedCardinality 1
    ], [
        a owl:Restriction; owl:onProperty :implementation;
        owl:minQualifiedCardinality 1
    ], [
        a owl:Restriction; owl:onProperty :output;
        owl:minQualifiedCardinality 1; owl:maxQualifiedCardinality 1
    ], [
        a owl:Restriction; owl:onProperty cct:expression;
        owl:minQualifiedCardinality 1; owl:maxQualifiedCardinality 1
    ].

:Action a rdfs:Class;
    rdfs:comment """An action is an *application* of an implementation, either 
    schematic (as in a workflow schema) or concrete (as in a workflow).""".

:Artefact a rdfs:Class;
    rdfs:comment """A single set of data: either source data or data that is 
    the output of an action. Can be either schematic or concrete.""".

:input a rdfs:Property;
    rdfs:domain :Signature, :Action, :Implementation;
    rdfs:range :Artefact.

:output a rdfs:Property;
    rdfs:domain :Signature, :Action, :Implementation;
    rdfs:range :Artefact.

:id a rdfs:Property;
    rdfs:domain :Artefact;
    rdfs:range rdf:Literal.

:apply a rdfs:Property;
    rdfs:domain :Action;
    rdfs:range :Tool.

:implements a rdfs:Property;
    rdfs:domain :Implementation;
    rdfs:range :Signature.

:action a rdfs:Property;
    rdfs:domain :Workflow;
    rdfs:range :Action.
